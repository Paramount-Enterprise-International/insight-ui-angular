<i-section>
  <i-section-body>
    <div class="flex flex-col gap-md">
      <h1>Grid</h1>
      <div>
        <code>i-grid</code>, <code>i-grid-column</code>, <code>i-grid-custom-column</code>,
        <code>i-grid-expandable-row</code>
      </div>
      <p>
        Data table component with support for sortable &amp; resizable columns, automatic columns,
        row selection, tree view, expandable detail rows, and built-in pagination.
      </p>
      <br />

      <!-- i-grid PROPS -->
      <p>Properties :</p>
      <table>
        <thead>
          <tr>
            <th>Property</th>
            <th>Data Type</th>
            <th>Required</th>
            <th>Default Value</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>dataSource</code></td>
            <td><code>any[]</code></td>
            <td>Optional</td>
            <td><code>[]</code></td>
            <td>
              Array of rows. When no column definitions are projected, columns are auto-generated
              from the first row's keys.
            </td>
          </tr>
          <tr>
            <td><code>selectionMode</code></td>
            <td><code>false</code> | <code>'single'</code> | <code>'multiple'</code></td>
            <td>Optional</td>
            <td><code>false</code></td>
            <td>
              Enables row selection. Use <code>'single'</code> for radio-like selection or
              <code>'multiple'</code> for checkbox selection.
            </td>
          </tr>
          <tr>
            <td><code>tree</code></td>
            <td><code>boolean</code> | <code>string</code> | <code>null</code></td>
            <td>Optional</td>
            <td><code>null</code></td>
            <td>
              Enables tree mode. When <code>true</code>, grid expects child nodes in
              <code>children</code> property. When set to a string, it is treated as the children
              property name.
            </td>
          </tr>
          <tr>
            <td><code>treeIndent</code></td>
            <td><code>number</code></td>
            <td>Optional</td>
            <td><code>16</code></td>
            <td>Indent (px) per tree level.</td>
          </tr>
          <tr>
            <td><code>treeInitialExpandLevel</code></td>
            <td><code>number | null</code></td>
            <td>Optional</td>
            <td><code>null</code></td>
            <td>
              Initial auto-expand level (1-based). For example, <code>1</code> expands only root
              nodes, <code>2</code> expands root + first level children. Ignored when
              <code>null</code>.
            </td>
          </tr>
          <tr>
            <td><code>showNumberColumn</code></td>
            <td><code>boolean</code></td>
            <td>Optional</td>
            <td><code>true</code></td>
            <td>
              When <code>true</code>, grid shows row number column. Automatically disabled in tree
              mode.
            </td>
          </tr>
          <tr>
            <td><code>filter</code></td>
            <td><code>string</code></td>
            <td>Optional</td>
            <td><code>''</code></td>
            <td>
              Filter text applied to all rows. In flat mode it does simple text search across
              serialized row values. In tree mode, filtering is recursive and prunes entire
              non-matching branches.
            </td>
          </tr>
          <tr>
            <td><code>paginator</code></td>
            <td><code>boolean</code></td>
            <td>Optional</td>
            <td><code>true</code></td>
            <td>
              Enables footer paginator. Automatically ignored in tree mode (tree always shows all
              visible nodes).
            </td>
          </tr>
          <tr>
            <td><code>pageIndex</code></td>
            <td><code>number</code></td>
            <td>Optional</td>
            <td><code>0</code></td>
            <td>Current page index (0-based). Used when <code>paginator</code> is enabled.</td>
          </tr>
          <tr>
            <td><code>pageSize</code></td>
            <td><code>number</code></td>
            <td>Optional</td>
            <td><code>10</code></td>
            <td>Rows per page when <code>paginator</code> is enabled.</td>
          </tr>
        </tbody>
      </table>

      <br />

      <!-- i-grid EVENTS -->
      <p>Event :</p>
      <table>
        <thead>
          <tr>
            <th>Event</th>
            <th>Description</th>
            <th>Required</th>
            <th>Event Payload</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>(rowClick)</code></td>
            <td>Emitted when a row is clicked.</td>
            <td>Optional</td>
            <td><code>row: any</code></td>
          </tr>
          <tr>
            <td><code>(rowSelectionChange)</code></td>
            <td>
              Emitted whenever selection changes. Includes full selected rows and last changed row.
            </td>
            <td>Optional</td>
            <td>
              <code>selected: any[]; lastChanged: any | null</code>
            </td>
          </tr>
          <tr>
            <td><code>(rowExpandChange)</code></td>
            <td>Emitted when a row's detail section is expanded or collapsed.</td>
            <td>Optional</td>
            <td><code>row: any; expanded: boolean</code></td>
          </tr>
          <tr>
            <td><code>(expandedRowsChange)</code></td>
            <td>Emitted whenever the set of expanded rows changes.</td>
            <td>Optional</td>
            <td><code>any[]</code></td>
          </tr>
          <tr>
            <td><code>(pageChange)</code></td>
            <td>Emitted when user changes page index or page size.</td>
            <td>Optional</td>
            <td><code>pageIndex: number; pageSize: number</code></td>
          </tr>
          <tr>
            <td><code>(cellAction)</code></td>
            <td>
              Emitted when element with <code>data-action</code> is clicked inside a grid row (for
              example in custom action column / detail row).
            </td>
            <td>Optional</td>
            <td><code>row: any; columnId?: string; action: string; originalEvent: Event</code></td>
          </tr>
        </tbody>
      </table>

      <br />

      <!-- i-grid METHODS -->
      <p>Methods :</p>
      <table>
        <thead>
          <tr>
            <th>Method</th>
            <th>Description</th>
            <th>Parameters</th>
            <th>Remark</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>expandRow(row)</code></td>
            <td>Programmatically expand a row's detail section.</td>
            <td><code>row: any</code></td>
            <td>Does nothing when no expandable row is defined.</td>
          </tr>
          <tr>
            <td><code>collapseRow(row)</code></td>
            <td>Programmatically collapse a row's detail section.</td>
            <td><code>row: any</code></td>
            <td></td>
          </tr>
          <tr>
            <td><code>toggleRowExpanded(row)</code></td>
            <td>Toggle expanded/collapsed state for a row.</td>
            <td><code>row: any</code></td>
            <td></td>
          </tr>
          <tr>
            <td><code>expandAll()</code></td>
            <td>
              Expand all visible rows. When detail is single-expansion mode, only the first visible
              row is expanded.
            </td>
            <td>-</td>
            <td></td>
          </tr>
          <tr>
            <td><code>collapseAll()</code></td>
            <td>Collapse all expanded rows.</td>
            <td>-</td>
            <td></td>
          </tr>
          <tr>
            <td><code>clearSelection()</code></td>
            <td>Clears all selected rows.</td>
            <td>-</td>
            <td>Also triggers <code>rowSelectionChange</code> with empty selection.</td>
          </tr>
        </tbody>
      </table>

      <br />

      <!-- i-grid-column -->
      <h2 id="i-grid-column">i-grid-column</h2>
      <p>
        Defines a data column bound to a property of each row. When at least one
        <code>i-grid-column</code> is declared, automatic column generation is disabled and only
        declared columns are rendered.
      </p>
      <p>Properties :</p>
      <table>
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Description</th>
            <th>Required</th>
            <th>Default Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>field-name</code></td>
            <td>
              Name of property on row object, e.g. <code>'fullName'</code>. Used for sorting and
              default cell value.
            </td>
            <td>Required</td>
            <td></td>
          </tr>
          <tr>
            <td><code>label</code></td>
            <td>Header text. When omitted, grid uses <code>field-name</code>.</td>
            <td>Optional</td>
            <td><code>field-name</code></td>
          </tr>
          <tr>
            <td><code>sortable</code></td>
            <td>
              Enables sorting on this column. Only effective when <code>field-name</code> is set.
            </td>
            <td>Optional</td>
            <td><code>true</code></td>
          </tr>
          <tr>
            <td><code>resizable</code></td>
            <td>Enables column resize using header drag handle.</td>
            <td>Optional</td>
            <td><code>true</code></td>
          </tr>
          <tr>
            <td><code>width</code></td>
            <td>
              Column width. Number is treated as px, <code>'fill'</code> makes column flex to fill
              available space.
            </td>
            <td>Optional</td>
            <td><code>'fill'</code> (auto columns)</td>
          </tr>
          <tr>
            <td><code>freeze</code></td>
            <td>
              When present, marks the last frozen column. All columns up to this one are sticky on
              the left.
            </td>
            <td>Optional</td>
            <td><code>false</code></td>
          </tr>
        </tbody>
      </table>
      <br />
      <p>Slots :</p>
      <table>
        <thead>
          <tr>
            <th>Slot</th>
            <th>Description</th>
            <th>Required</th>
            <th>Context</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>&lt;template slot="header"&gt;</code></td>
            <td>Custom header content, instead of <code>label</code>.</td>
            <td>Optional</td>
            <td>No binding context; use static markup or icons.</td>
          </tr>
          <tr>
            <td><code>&lt;template slot="cell"&gt;</code></td>
            <td>Custom cell content for this column.</td>
            <td>Optional</td>
            <td>
              Template gets current row as context. You can use <code>property</code>,
              <code>data-bind</code>, or <code>data-bind-html</code> to bind values.
            </td>
          </tr>
        </tbody>
      </table>

      <br />

      <!-- i-grid-custom-column -->
      <h2 id="i-grid-custom-column">i-grid-custom-column</h2>
      <p>
        Defines a custom column that is not bound to a specific field. Commonly used for action
        buttons, status badges, etc.
      </p>
      <p>Properties :</p>
      <table>
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Description</th>
            <th>Required</th>
            <th>Default Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>label</code></td>
            <td>Header text for this column.</td>
            <td>Optional</td>
            <td></td>
          </tr>
          <tr>
            <td><code>resizable</code></td>
            <td>Enables column resize using header drag handle.</td>
            <td>Optional</td>
            <td><code>true</code></td>
          </tr>
          <tr>
            <td><code>width</code></td>
            <td>Column width, same usage with <code>i-grid-column</code>.</td>
            <td>Optional</td>
            <td></td>
          </tr>
          <tr>
            <td><code>freeze</code></td>
            <td>Works the same as on <code>i-grid-column</code> (frozen/sticky on the left).</td>
            <td>Optional</td>
            <td><code>false</code></td>
          </tr>
        </tbody>
      </table>
      <br />
      <p>Slots :</p>
      <table>
        <thead>
          <tr>
            <th>Slot</th>
            <th>Description</th>
            <th>Required</th>
            <th>Context</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>&lt;template slot="header"&gt;</code></td>
            <td>Custom header content.</td>
            <td>Optional</td>
            <td>-</td>
          </tr>
          <tr>
            <td><code>&lt;template slot="cell"&gt;</code></td>
            <td>Custom body cell content.</td>
            <td>Required</td>
            <td>
              Same binding helpers as <code>i-grid-column</code>. Row is passed as template context.
            </td>
          </tr>
        </tbody>
      </table>

      <br />

      <!-- i-grid-expandable-row -->
      <h2 id="i-grid-expandable-row">i-grid-expandable-row</h2>
      <p>
        Defines a single detail-row template that is rendered directly under each row when expanded.
      </p>
      <p>Properties :</p>
      <table>
        <thead>
          <tr>
            <th>Attribute</th>
            <th>Description</th>
            <th>Required</th>
            <th>Default Value</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>expand-single</code></td>
            <td>
              When present, only one row can be expanded at a time. Expanding a new row collapses
              previously expanded row.
            </td>
            <td>Optional</td>
            <td><code>false</code></td>
          </tr>
        </tbody>
      </table>
      <br />
      <p>Slots :</p>
      <table>
        <thead>
          <tr>
            <th>Slot</th>
            <th>Description</th>
            <th>Required</th>
            <th>Context</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>&lt;template slot="detail"&gt;</code></td>
            <td>Template used as content for expanded detail row.</td>
            <td>Required</td>
            <td>
              Receives current row as context. You can bind using <code>property</code>,
              <code>data-bind</code> and <code>data-bind-html</code> attributes.
            </td>
          </tr>
        </tbody>
      </table>

      <br />
      <h2>Template binding helpers</h2>
      <p>Inside <code>&lt;template&gt;</code> for cells or detail rows, you can use:</p>
      <ul>
        <li><code>property</code> &mdash; simple interpolation based on row fields.</li>
        <li>
          <code>data-bind="fullName"</code> &mdash; sets element's text content to value of
          <code>row.fullName</code>.
        </li>
        <li>
          <code>data-bind-html="description"</code> &mdash; injects raw HTML from
          <code>row.description</code>.
        </li>
        <li>
          <code>data-action="edit"</code> &mdash; clicking this element emits
          <code>cellAction</code> with <code>action: 'edit'</code> and bound <code>row</code>.
        </li>
      </ul>

      <br />
      <h2>Examples</h2>

      <!-- Example 1: Basic grid -->
      <p>Basic <code>i-grid</code> with auto-generated columns</p>
      <i-section>
        <i-section-tabs height="320">
          <i-section-tab title="Preview">
            <i-section>
              <i-section-body class="p-0">
                <i-grid [dataSource]="dataSource">
                  <!-- Data column: Name (frozen) -->
                  <i-grid-column fieldName="name" title="Name" [freeze]="true" [width]="420">
                    <i-grid-cell *iCellDef="let row">
                      <div class="font-semibold">{{ row.name }}</div>
                    </i-grid-cell>
                  </i-grid-column>

                  <!-- Data column: Email -->
                  <i-grid-column fieldName="email" title="Email" [width]="360">
                    <i-grid-cell *iCellDef="let row">
                      <span class="text-muted">{{ row.email }}</span>
                    </i-grid-cell>
                  </i-grid-column>

                  <!-- Data column: Role -->
                  <i-grid-column fieldName="role" title="Role" [width]="260" />
                </i-grid>
              </i-section-body>
            </i-section>
          </i-section-tab>

          <i-section-tab title="HTML">
            <i-code-viewer class="h-full" file="grid-basic.html" />
          </i-section-tab>
          <i-section-tab title="Typescript">
            <i-code-viewer class="h-full" file="grid-basic.ts" />
          </i-section-tab>
        </i-section-tabs>
      </i-section>

      <br />

      <!-- Example 2: Columns + selection -->
      <p>
        Grid with explicit columns, selection, and custom action column using
        <code>data-action</code>
      </p>
      <i-section>
        <i-section-tabs height="340">
          <i-section-tab title="Preview">
            <i-section>
              <i-section-body class="p-0">
                <i-grid [dataSource]="dataSource">
                  <!-- Data column: Name (frozen) -->
                  <i-grid-column fieldName="name" title="Name" [freeze]="true" [width]="220">
                    <i-grid-cell *iCellDef="let row">
                      <div class="font-semibold">{{ row.name }}</div>
                    </i-grid-cell>
                  </i-grid-column>

                  <!-- Data column: Email -->
                  <i-grid-column fieldName="email" title="Email" [width]="360">
                    <i-grid-cell *iCellDef="let row">
                      <span class="text-muted">{{ row.email }}</span>
                    </i-grid-cell>
                  </i-grid-column>

                  <!-- Data column: Role -->
                  <i-grid-column fieldName="role" title="Role" [width]="260" />

                  <!-- Custom column: Actions -->
                  <i-grid-custom-column title="Actions" [width]="260">
                    <i-grid-cell *iCellDef="let row">
                      <i-button size="xs" variant="outline"> Edit </i-button>
                      <i-button size="xs" variant="outline"> Delete </i-button>
                    </i-grid-cell>
                  </i-grid-custom-column>
                </i-grid>
              </i-section-body>
            </i-section>
          </i-section-tab>
          <i-section-tab title="HTML">
            <i-code-viewer class="h-full" file="grid-data-action.html" />
          </i-section-tab>
          <i-section-tab title="Typescript">
            <i-code-viewer class="h-full" file="grid-data-action.ts" />
          </i-section-tab>
        </i-section-tabs>
      </i-section>

      <br />

      <!-- Example 3: Tree grid -->
      <p>Tree grid with recursive data and multi selection</p>
      <i-section>
        <i-section-tabs height="340">
          <i-section-tab title="Preview">
            <i-section>
              <i-section-body class="p-0">
                <i-grid
                  selectionMode="multiple"
                  [dataSource]="treeData"
                  [showNumberColumn]="false"
                  [tree]="'children'"
                  [treeInitialExpandLevel]="2"
                  (expandedRowsChange)="onExpandedRowsChange($event)"
                  (rowClick)="onRowClick($event)"
                  (rowExpandChange)="onRowExpandChange($event)"
                >
                  <!-- Name column (frozen + fill width) -->
                  <i-grid-column fieldName="name" label="Name" width="fill" [freeze]="true" />

                  <!-- Status column -->
                  <i-grid-column fieldName="status" label="Status" [width]="140" />
                </i-grid>
              </i-section-body>
            </i-section>
          </i-section-tab>
          <i-section-tab title="HTML">
            <i-code-viewer class="h-full" file="tree-grid.html" />
          </i-section-tab>
          <i-section-tab title="Typescript">
            <i-code-viewer class="h-full" file="tree-grid.ts" />
          </i-section-tab>
        </i-section-tabs>
      </i-section>

      <br />

      <!-- Example 4: Expandable detail rows -->
      <p>Grid with expandable detail rows</p>
      <i-section>
        <i-section-tabs height="360">
          <i-section-tab title="Preview">
            <i-section>
              <i-section-body class="p-0">
                <i-grid
                  selectionMode="multiple"
                  [dataSource]="dataSource"
                  (expandedRowsChange)="onExpandedRowsChange($event)"
                  (rowClick)="onRowClick($event)"
                  (rowExpandChange)="onRowExpandChange($event)"
                  (selectionChange)="onSelectionChange($event)"
                >
                  <!-- Data column: Name (frozen) -->
                  <i-grid-column fieldName="name" title="Name" [freeze]="true" [width]="320">
                    <i-grid-cell *iCellDef="let row">
                      <div class="font-semibold">{{ row.name }}</div>
                    </i-grid-cell>
                  </i-grid-column>

                  <!-- Data column: Email -->
                  <i-grid-column fieldName="email" title="Email" [width]="360">
                    <i-grid-cell *iCellDef="let row">
                      <span class="text-muted">{{ row.email }}</span>
                    </i-grid-cell>
                  </i-grid-column>

                  <!-- Data column: Role -->
                  <i-grid-column fieldName="role" title="Role" [width]="160" />

                  <!-- Custom column: Actions -->
                  <i-grid-custom-column title="Actions" [width]="220">
                    <i-grid-cell *iCellDef="let row">
                      <i-button size="xs" variant="outline"> Edit </i-button>
                      <i-button size="xs" variant="outline"> Delete </i-button>
                    </i-grid-cell>
                  </i-grid-custom-column>

                  <!-- Expandable detail row (single expanded at a time) -->
                  <i-grid-expandable-row *iRowDef="let row; expandSingle: true">
                    <div class="flex flex-col gap-md p-md">
                      <div><b>ID:</b> {{ row.id }}</div>
                      <div><b>Department:</b> {{ row.department }}</div>
                      <div><b>Status:</b> {{ row.status }}</div>
                    </div>
                  </i-grid-expandable-row>
                </i-grid>
              </i-section-body>
            </i-section>
          </i-section-tab>
          <i-section-tab title="HTML">
            <i-code-viewer class="h-full" file="grid-expandable.html" />
          </i-section-tab>
          <i-section-tab title="Typescript">
            <i-code-viewer class="h-full" file="grid-expandable.ts" />
          </i-section-tab>
        </i-section-tabs>
      </i-section>
    </div>
  </i-section-body>
</i-section>
