<!--
 IDatepicker
 Version: 1.4.1
-->

<!-- Core input: styled via i-input -->
<i-input
  [placeholder]="placeholder"
  [value]="displayText"
  [invalid]="invalid"
  [readonly]="disabled"
  [iInputMask]="{ type: 'date', format: format }"
  [append]="appendAddon">
</i-input>

<!-- Popup calendar -->
@if (isOpen) {
  <div class="i-datepicker-panel" [ngClass]="panelPositionClass">
    <div class="i-datepicker-header">
      <i-button (click)="prevMonth()" size="xs" icon="prev"></i-button>

      <!-- Month select -->
      <i-select
        class="i-date-picker-month-select"
        [options]="months"
        [value]="monthSelected"
        (onOptionSelected)="onMonthChange($event)">
      </i-select>

      <!-- Year select -->
      <i-select
        class="i-date-picker-year-select"
        [options]="years"
        [value]="viewYear"
        (onOptionSelected)="onYearChange($event)">
      </i-select>

      <i-button (click)="nextMonth()" size="xs" icon="next"></i-button>
    </div>

    <div class="i-datepicker-weekdays">
      @for (w of weekdays; track w) {
        <small>{{ w }}</small>
      }
    </div>

    <div class="i-datepicker-weeks">
      @for (week of weeks; track $index) {
        <div class="i-datepicker-week">
          @for (d of week; track d.date.getTime()) {
            <div
              class="i-datepicker-day"
              [class.today]="d.isToday && !d.isSelected"
              [class.selected]="d.isSelected"
              [class.current-month]="d.inCurrentMonth"
              (click)="selectDay(d)">
              {{ d.date.getDate() }}
            </div>
          }
        </div>
      }
    </div>
  </div>
}
